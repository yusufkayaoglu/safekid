spring.application.name=SafeKid

# Local dev: proje kökünde local.properties varsa yükle (gitignore'da)
# Railway'de bu dosya olmayacağı için env var'lardan okur.
spring.config.import=optional:file:./local.properties

# Railway PORT env var'ını kullan, yoksa 8081
server.port=${PORT:8081}

# ── Veritabanı ─────────────────────────────────────────────────────────────────
# Railway PostgreSQL eklentisi PGHOST, PGPORT, PGDATABASE, PGUSER, PGPASSWORD
# env var'larını otomatik sağlar. Lokalde fallback değerler kullanılır.
spring.datasource.url=jdbc:postgresql://${PGHOST:localhost}:${PGPORT:5432}/${PGDATABASE:safekid}
spring.datasource.username=${PGUSER:postgres}
spring.datasource.password=${PGPASSWORD:123456}

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Liquibase — Railway'de fresh DB olduğundan Hibernate ddl-auto yönetir
spring.liquibase.enabled=false

# ── JWT ────────────────────────────────────────────────────────────────────────
security.jwt.secret=${JWT_SECRET}

# ── Gmail SMTP ─────────────────────────────────────────────────────────────────
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME:safekidapp.noreplay@gmail.com}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ── Anthropic Claude AI ────────────────────────────────────────────────────────
safekid.ai.anthropic.api-key=${ANTHROPIC_API_KEY:}
safekid.ai.anthropic.base-url=https://api.anthropic.com
safekid.ai.anthropic.model=claude-sonnet-4-20250514
safekid.ai.anthropic.max-tokens=2048
safekid.ai.anomaly-check-interval-ms=300000
safekid.ai.daily-summary-cron=0 0 21 * * *
safekid.ai.speed-threshold-kmh=60.0

# ── Geofence ───────────────────────────────────────────────────────────────────
safekid.geofence.alert-cooldown-minutes=30

# ── Firebase ───────────────────────────────────────────────────────────────────
firebase.credentials.path=${FIREBASE_CREDENTIALS_PATH:firebase-service-account.json}

# ── Admin ─────────────────────────────────────────────────────────────────────
# Bu mail adresi Google Play aboneliği olmaksızın her zaman premium sayılır
safekid.admin.email=yusufkayaogluu@gmail.com

# ── Google Play Billing ────────────────────────────────────────────────────────
# Prod'da false yap ve gerçek service account JSON'ı ayarla
billing.google.skip-verification=${BILLING_SKIP_VERIFICATION:true}
billing.google.service-account-json=classpath:google-service-account.json
billing.google.package-name=${BILLING_PACKAGE_NAME:com.safekid.mobile}

# ── Logging ────────────────────────────────────────────────────────────────────
logging.level.org.apache.catalina.connector=OFF
logging.level.org.apache.catalina.core.ContainerBase=OFF
